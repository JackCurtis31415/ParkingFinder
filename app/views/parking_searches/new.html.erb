<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript">
      console.log("hit the geo java");
     
  function setGeoCookie(position) {
    var cookie_val = position.coords.latitude + "|" + position.coords.longitude;
      document.cookie = "lat_lng=" + escape(cookie_val);
      debugger ;
  }

  function doGeoLocationOnDemand() {
      console.log("hit the geolocate");
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(setGeoCookie);
      debugger ;      
    } else {
      error('Geo Location is not supported');
      debugger ;
    }
      
  }

   </script>

</head>

<body>
<div class="row large-offset-4 white-text">
  <%- if @parking_search.errors.present? -%>
    <div class="center alert-box alert" data-alert>
      <ul>
        <%- @parking_search.errors.full_messages.each do |error| -%>
          <li><%= error %></li>
        <%- end -%>
      </ul>
    </div>
  <%- end -%>

<div class="row fullWidth">
  <div id="home-main-image">
    <div class="inner row">
      <!-- text -->
      <div class="home-text-search">
        <h1>Search for Parking</h1>
        <h2>Find the best parking</h2>
	<h2> in <%=@parking_search.city%> now!</h2>
        <!-- search -->
        <div class="home-search">
          <div class="inner">
	    <%= form_tag parking_searches_path, :method => "create", id: "search-form" do %>
              <%= text_field_tag :address, params[:address], size: 30,
		  placeholder: "Enter #{@parking_search.city} street address" %>
	      <%= hidden_field_tag :city, @city %>
	      <%= hidden_field_tag :state, @state %>
	      <%= hidden_field_tag :latitude, @latitude %>
	      <%= hidden_field_tag :longitude, @longitude %>
	      <%= submit_tag 'Search', class: "button postfix", name: nil, id: 'hidden-submit', style: 'display: none;' %>
	      <%= submit_tag 'Use Current Position', class: "button", :onclick => "javascript:doGeoLocationOnDemand();"%>	
              <% end %>
	      
	      <div class="clear"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>

